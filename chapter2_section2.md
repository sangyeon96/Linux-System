# Section 2. 셸 커맨드

### 2.1 내장 커맨드란?

셸 자체에 포함된 커맨드를 **내장 커맨드\(내부 명령어\)**라고 부른다. 반대로 셸이 가진 기능이 아닌 별도의 프로그램을 **외부 명령어**라고 한다. 외부 명령어를 실행하려면 경로를 설정해 두거나 전체 경로\(full PATH\)를 입력하여 해당 프로그램을 실행해야만 한다.

내장 커맨드는 type으로 확인할 수 있다. 또한, bash 메뉴얼\(man bash\)에서는 'SHELL BUILTIN COMMANDS'라는 항목에서 내장 커맨드를 확인할 수 있다.



### 2.2 주요 내장 커맨드

##### 쌍점\(:\)

아무것도 하지 않고 종료 코드 '0'을 반환한다.

test.sh라는 파일을 만들어 예제 2-1을 실행해보았다.

    count=0
    while :
    do
    	echo $count
    	count=`expr $count + 1`
    done

첫번째 줄에서 주의해야 할 점은 변수를 대입할 때 공백이 없어야한다는 점이다. 대입 시 공백을 넣으면 공백을 데이터로 처리해 오류가 난다.

두번째 줄에서는 :를 제대로 인식시키기 위해 while 뒤에 꼭 공백을 넣어줘야한다.

echo는 리눅스에서 출력을 하기 위해 사용하는 명령어이다. 셸 스크립트에서 변수에 대입된 값은 모두 문자열로 취급된다. 그래서 변수를 출력하는 경우 $를 이용하고, 문자열을 출력하는 경우 그냥 입력하거나 " "를 이용한다. 특히 -e 옵션으로 escaped characters를 이용하는 경우 " "를 이용한다.

expr는 연산자와 피연산자 사이에 공백을 주어야 제대로 계산된다. 공백을 주지 않으면 하나의 문자열로 인식한다. 그리고 수식을 묶어 준 것은 따옴표\('\)가 아니라 역따옴표\(\`\)다..그것도 모르고 실행했다가 expr $count + 1만 무한으로 출력되었다..count 변수에 문자열로 들어갔나보다..

여기서 살짝 의문인 점은 C언어에서 보면 while\(1\)에서 1이 true를 반환하여 무한반복하는데, 여기서는 0이 true를 반환하여 무한 루프를 돈다는 것이다. 이건 차차 알아가기로 하고.. 

##### source 또는 온점\(.\)

현행 셸 환경에서 다른 셸 스크립트를 불러와 실행한다.

test.sh라는 파일에 다음을 입력한 후 source와 .을 실행해보았다.

```
year=2018
echo $year
```

현재 퍼미션이 user에게 rw-임에도 불구하고, source 또는 .명령어를 이용하면 파일을 실행할 수 있다.

![](/assets/source.png)

##### cd

change directory. 지정된 디렉터리로 이동한다.

콘솔 2-14에 있는 export는 환경변수를 설정할 때 사용하는 명령어이다.

env \| grep 변수로 환경변수를 확인한다.

환경변수를 해제할 시에는 unset 명령어를 사용한다.

CENTOS 7에서는 dpkg directory가 존재하지 않아 ubuntu에서 실행해보았다.

![](/assets/cd.png)

##### eval

파라미터를 간접 참조한다.

##### exec

fork 시스템 콜을 사용하지 않고 지정된 커맨드를 스스로 실행한다.

##### read

표준 입력에서 1행 읽어들인다.

##### 그 외의 내장 커맨드

exit, export, return, unset, pwd, logout, kill

pwd\(pRINT wORKING dIRECTORY\)

